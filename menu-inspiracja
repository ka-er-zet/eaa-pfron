<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audyt Dostępności - Dashboard</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Fonts: Inter + JetBrains Mono (dla kodów) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; }
        .dark .custom-scroll::-webkit-scrollbar-thumb { background: #475569; }

        /* Minor Third Scale Typography Utilities (approximate for Tailwind)
           Base: 16px (1rem)
           Scale: 1.2
           - Lvl 0 (Item Title): 1rem (base)
           - Lvl -1 (Meta/Code): 0.833rem (~text-xs/sm)
           - Lvl -2 (Section Header): 0.694rem (~text-xs)
        */
    </style>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        dark: {
                            bg: '#0f172a',
                            sidebar: '#111827', // Nieco ciemniejszy sidebar dla kontrastu
                            border: '#1f2937'
                        },
                        brand: {
                            accent: '#3b82f6' // Główny kolor akcentu (niebieski)
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 text-slate-900 dark:bg-dark-bg dark:text-slate-100 h-screen overflow-hidden">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONS ---
        const Icon = ({ children, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
        );
        const MenuIcon = () => <Icon><line x1="3" x2="21" y1="12" y2="12"/><line x1="3" x2="21" y1="6" y2="6"/><line x1="3" x2="21" y1="18" y2="18"/></Icon>;
        const CheckCircle = ({className}) => <Icon className={className}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></Icon>;
        const XCircle = ({className}) => <Icon className={className}><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></Icon>;
        const MinusCircle = ({className}) => <Icon className={className}><circle cx="12" cy="12" r="10"/><path d="M8 12h8"/></Icon>;
        const AlertCircle = ({className}) => <Icon className={className}><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></Icon>;
        const Sun = () => <Icon><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></Icon>;
        const Moon = () => <Icon><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></Icon>;
        const ChevronRight = () => <Icon><path d="m9 18 6-6-6-6"/></Icon>;
        const Save = () => <Icon><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></Icon>;
        const Search = () => <Icon><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></Icon>;

        // --- DATA STRUCTURE (Grouped for sidebar) ---
        // type: 'header' (structure) | 'item' (interactive)
        const sidebarData = [
            { type: 'header', title: "5.1 Funkcjonalność zamknięta" },
            { type: 'item', id: "C.5.1.2.1", title: "Tryb Kiosku", status: "pass" },
            { type: 'item', id: "C.5.1.2.2", title: "Operacyjność zamknięta", status: "undecided" },
            { type: 'item', id: "C.5.1.3", title: "Komunikacja głosowa", status: "na" },
            
            { type: 'header', title: "5.1.4 Wyświetlanie" },
            { type: 'item', id: "C.5.1.4", title: "Funkcje wyświetlania", status: "fail" },
            { type: 'item', id: "C.5.1.5", title: "Informacje wizualne", status: "undecided" },
            
            { type: 'header', title: "5.2 Aktywacja Biometryczna" },
            { type: 'item', id: "C.5.2.1", title: "Biometria ogólna", status: "undecided" },
        ];

        const activeItemDetails = {
            id: "C.5.1.2.2",
            standard: "EN 301 549 / Sekcja 5.1.2",
            title: "Operacyjność zamknięta",
            description: "W przypadku gdy TIK posiada funkcjonalność zamkniętą, musi ona być operowalna bez konieczności podłączania przez użytkownika technologii wspomagających.",
            procedure: "1. Zidentyfikuj funkcje zamknięte.\n2. Wykonaj zadania bez AT.\n3. Zweryfikuj tryby dostępności.",
            status: "undecided"
        };

        // --- COMPONENTS ---

        const StatusDot = ({ status }) => {
            // Minimalist status indicator for sidebar
            const colors = {
                pass: "bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)]",
                fail: "bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.6)]",
                na: "bg-slate-600",
                undecided: "border-2 border-slate-500 bg-transparent"
            };
            return <div className={`w-2 h-2 rounded-full ${colors[status]}`}></div>;
        };

        const StatusIconBig = ({ status, size = "w-5 h-5" }) => {
             switch(status) {
                case 'pass': return <CheckCircle className={`${size} text-green-600 dark:text-green-400`} />;
                case 'fail': return <XCircle className={`${size} text-red-600 dark:text-red-400`} />;
                case 'na': return <MinusCircle className={`${size} text-gray-400`} />;
                default: return <AlertCircle className={`${size} text-amber-500`} />;
            }
        }

        const Sidebar = ({ isOpen, setIsOpen, activeId, setActiveId, isDark, setIsDark }) => {
            return (
                <aside className={`
                    fixed inset-y-0 left-0 z-50 w-80 bg-[#f8fafc] dark:bg-[#111827] border-r border-slate-200 dark:border-slate-800 
                    transform transition-transform duration-300 ease-in-out flex flex-col
                    ${isOpen ? 'translate-x-0' : '-translate-x-full'}
                    lg:relative lg:translate-x-0
                `}>
                    {/* Header with Search */}
                    <div className="p-5 flex flex-col gap-4">
                        <div className="flex items-center justify-between">
                            <h2 className="font-bold text-xl text-slate-900 dark:text-white tracking-tight">EAA Audyt</h2>
                            <button onClick={() => setIsOpen(false)} className="lg:hidden text-slate-400"><Icon><path d="M18 6 6 18"/><path d="m6 6 12 12"/></Icon></button>
                        </div>
                        
                        {/* Search Input - Design element to look pro */}
                        <div className="relative group">
                            <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <Search className="w-4 h-4 text-slate-400" />
                            </div>
                            <input 
                                type="text" 
                                placeholder="Szukaj wymagania..." 
                                className="w-full pl-9 pr-3 py-2 bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-700 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all placeholder-slate-400 dark:text-slate-200"
                            />
                        </div>
                    </div>

                    {/* Scrollable List */}
                    <div className="flex-1 overflow-y-auto custom-scroll px-3 py-2 space-y-1">
                        {sidebarData.map((item, idx) => {
                            if (item.type === 'header') {
                                // --- HEADER (Structure) ---
                                // Less visible, Minor Third scale down (~11-12px), Uppercase
                                return (
                                    <div key={idx} className="mt-6 mb-2 px-3">
                                        <h3 className="text-[11px] font-bold uppercase tracking-wider text-slate-400 dark:text-slate-500 font-mono">
                                            {item.title}
                                        </h3>
                                    </div>
                                );
                            } else {
                                // --- ITEM (Interactive) ---
                                // Most visible.
                                const isActive = item.id === activeId;
                                return (
                                    <button 
                                        key={item.id}
                                        onClick={() => {
                                            setActiveId(item.id);
                                            if (window.innerWidth < 1024) setIsOpen(false);
                                        }}
                                        className={`
                                            group w-full text-left relative pl-4 pr-3 py-3 rounded-lg transition-all duration-200 flex items-start justify-between
                                            ${isActive 
                                                ? 'bg-white dark:bg-slate-800 shadow-sm' 
                                                : 'hover:bg-slate-100 dark:hover:bg-slate-800/50 text-slate-600 dark:text-slate-400'
                                            }
                                        `}
                                    >
                                        {/* Active Indicator Line (Left Border simulation but rounded) */}
                                        {isActive && (
                                            <div className="absolute left-0 top-3 bottom-3 w-1 bg-blue-500 rounded-r-full"></div>
                                        )}

                                        <div className="flex flex-col gap-0.5 z-10">
                                            {/* Code (Minor Third down: ~12px) - De-emphasized */}
                                            <span className={`
                                                font-mono text-[11px] leading-none transition-colors
                                                ${isActive ? 'text-blue-600 dark:text-blue-400 font-semibold' : 'text-slate-400 dark:text-slate-600 group-hover:text-slate-500'}
                                            `}>
                                                {item.id}
                                            </span>
                                            
                                            {/* Title (Base: ~14-15px) - Emphasized */}
                                            <span className={`
                                                text-[14px] leading-snug font-medium transition-colors
                                                ${isActive ? 'text-slate-900 dark:text-white' : 'text-slate-600 dark:text-slate-400 group-hover:text-slate-800 dark:group-hover:text-slate-200'}
                                            `}>
                                                {item.title}
                                            </span>
                                        </div>

                                        {/* Status Dot */}
                                        <div className="mt-1.5 opacity-80 group-hover:opacity-100 transition-opacity">
                                            <StatusDot status={item.status} />
                                        </div>
                                    </button>
                                );
                            }
                        })}
                    </div>

                    {/* Footer / User Profile */}
                    <div className="p-4 border-t border-slate-200 dark:border-slate-800 bg-[#f8fafc] dark:bg-[#111827]">
                        <button 
                            onClick={() => setIsDark(!isDark)}
                            className="w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors text-xs font-medium text-slate-600 dark:text-slate-400"
                        >
                            <span className="flex items-center gap-2">
                                <div className="w-6 h-6 rounded-full bg-slate-300 dark:bg-slate-700 overflow-hidden relative">
                                    <svg className="absolute w-8 h-8 -left-1 text-slate-500" fill="currentColor" viewBox="0 0 24 24"><path d="M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
                                </div>
                                Jan Kowalski
                            </span>
                            {isDark ? <Sun className="w-4 h-4" /> : <Moon className="w-4 h-4" />}
                        </button>
                    </div>
                </aside>
            );
        };

        const App = () => {
            const [sidebarOpen, setSidebarOpen] = useState(true);
            const [isDark, setIsDark] = useState(true); // Default dark as per image
            const [activeId, setActiveId] = useState("C.5.1.2.2");
            const [currentStatus, setCurrentStatus] = useState(activeItemDetails.status);
            const [comment, setComment] = useState("");

            useEffect(() => {
                const root = document.documentElement;
                if (isDark) root.classList.add('dark');
                else root.classList.remove('dark');
            }, [isDark]);

            // Mobile sidebar handler
            useEffect(() => {
                const handleResize = () => {
                    if (window.innerWidth < 1024) setSidebarOpen(false);
                    else setSidebarOpen(true);
                };
                window.addEventListener('resize', handleResize);
                handleResize();
                return () => window.removeEventListener('resize', handleResize);
            }, []);

            return (
                <div className="flex h-screen bg-white dark:bg-dark-bg transition-colors duration-300 font-sans">
                    
                    <Sidebar 
                        isOpen={sidebarOpen} 
                        setIsOpen={setSidebarOpen} 
                        activeId={activeId} 
                        setActiveId={setActiveId}
                        isDark={isDark}
                        setIsDark={setIsDark}
                    />

                    {/* --- MAIN CONTENT --- */}
                    <main className="flex-1 flex flex-col h-screen overflow-hidden relative w-full bg-white dark:bg-dark-bg">
                        
                        {/* Topbar Mobile */}
                        <header className="h-14 bg-white dark:bg-dark-sidebar border-b border-slate-200 dark:border-slate-800 flex items-center px-4 lg:hidden flex-shrink-0 justify-between">
                            <div className="flex items-center gap-3">
                                <button onClick={() => setSidebarOpen(true)} className="text-slate-600 dark:text-slate-300">
                                    <MenuIcon />
                                </button>
                                <span className="font-semibold text-slate-800 dark:text-white text-sm">{activeId}</span>
                            </div>
                        </header>

                        {/* Content Scroll Area */}
                        <div className="flex-1 overflow-y-auto custom-scroll p-6 md:p-10 lg:p-16">
                            <div className="max-w-4xl mx-auto w-full">
                                
                                {/* Breadcrumbs */}
                                <nav className="text-[11px] uppercase tracking-wider font-semibold text-slate-400 mb-6 flex items-center gap-2">
                                    <span>EN 301 549</span>
                                    <ChevronRight className="w-3 h-3" />
                                    <span>Rozdział 5</span>
                                    <ChevronRight className="w-3 h-3" />
                                    <span className="text-blue-600 dark:text-blue-400">{activeId}</span>
                                </nav>

                                {/* Title Block */}
                                <div className="mb-10 pb-6 border-b border-slate-100 dark:border-slate-800/60">
                                    <h1 className="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white mb-4 leading-tight">
                                        {activeItemDetails.title}
                                    </h1>
                                    <p className="text-lg text-slate-600 dark:text-slate-400 leading-relaxed max-w-2xl">
                                        {activeItemDetails.description}
                                    </p>
                                </div>

                                {/* Decision Area */}
                                <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                                    
                                    {/* Left: Procedure & Input */}
                                    <div className="lg:col-span-2 space-y-8">
                                        <section>
                                            <h3 className="text-xs font-bold uppercase tracking-wider text-slate-500 mb-3 flex items-center gap-2">
                                                Procedura Testowa
                                            </h3>
                                            <div className="prose prose-slate dark:prose-invert max-w-none">
                                                <div className="bg-slate-50 dark:bg-slate-800/30 p-5 rounded-xl border border-slate-100 dark:border-slate-800 text-sm leading-7 whitespace-pre-line text-slate-700 dark:text-slate-300">
                                                    {activeItemDetails.procedure}
                                                </div>
                                            </div>
                                        </section>

                                        <section>
                                            <h3 className="text-xs font-bold uppercase tracking-wider text-slate-500 mb-3">
                                                Dowody / Komentarz
                                            </h3>
                                            <textarea 
                                                value={comment}
                                                onChange={(e) => setComment(e.target.value)}
                                                className="w-full h-32 p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 outline-none transition-all text-slate-900 dark:text-white text-sm placeholder-slate-400"
                                                placeholder="Wpisz swoje uwagi..."
                                            ></textarea>
                                        </section>
                                    </div>

                                    {/* Right: Sticky Status Card */}
                                    <div className="lg:col-span-1">
                                        <div className="sticky top-6 bg-white dark:bg-[#1e293b] rounded-xl border border-slate-200 dark:border-slate-700 p-5 shadow-sm">
                                            <h3 className="text-xs font-bold uppercase tracking-wider text-slate-500 mb-4">
                                                Status Wymagania
                                            </h3>
                                            
                                            <div className="space-y-2">
                                                {[
                                                    { id: 'pass', label: 'Zgodny', icon: CheckCircle, color: 'text-green-600 dark:text-green-400', bg: 'hover:bg-green-50 dark:hover:bg-green-900/10', activeBorder: 'border-green-500 bg-green-50 dark:bg-green-900/20' },
                                                    { id: 'fail', label: 'Niezgodny', icon: XCircle, color: 'text-red-600 dark:text-red-400', bg: 'hover:bg-red-50 dark:hover:bg-red-900/10', activeBorder: 'border-red-500 bg-red-50 dark:bg-red-900/20' },
                                                    { id: 'na', label: 'Nie dotyczy', icon: MinusCircle, color: 'text-slate-500 dark:text-slate-400', bg: 'hover:bg-slate-50 dark:hover:bg-slate-800/50', activeBorder: 'border-slate-500 bg-slate-100 dark:bg-slate-800' }
                                                ].map((opt) => (
                                                    <button
                                                        key={opt.id}
                                                        onClick={() => setCurrentStatus(opt.id)}
                                                        className={`
                                                            w-full flex items-center gap-3 p-3 rounded-lg border transition-all
                                                            ${currentStatus === opt.id 
                                                                ? `${opt.activeBorder} ring-1 ring-inset ${opt.color.split(' ')[0].replace('text', 'ring')}` 
                                                                : `border-slate-200 dark:border-slate-700 ${opt.bg} text-slate-600 dark:text-slate-400`
                                                            }
                                                        `}
                                                    >
                                                        <opt.icon className={`w-5 h-5 ${currentStatus === opt.id ? opt.color : 'text-slate-400'}`} />
                                                        <span className={`font-medium text-sm ${currentStatus === opt.id ? 'text-slate-900 dark:text-white' : ''}`}>
                                                            {opt.label}
                                                        </span>
                                                        {currentStatus === opt.id && <div className="ml-auto w-2 h-2 rounded-full bg-current opacity-50"></div>}
                                                    </button>
                                                ))}
                                            </div>

                                            <div className="mt-6 pt-4 border-t border-slate-100 dark:border-slate-700/50">
                                                <button className="w-full bg-slate-900 dark:bg-blue-600 hover:bg-slate-800 dark:hover:bg-blue-500 text-white py-2.5 rounded-lg font-medium text-sm transition-all shadow-md shadow-blue-900/10 flex items-center justify-center gap-2">
                                                    <Save className="w-4 h-4" />
                                                    Zapisz
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div className="h-20"></div>
                            </div>
                        </div>
                    </main>
                    
                    {/* Overlay */}
                    {sidebarOpen && (
                        <div 
                            className="fixed inset-0 bg-slate-900/50 z-40 lg:hidden backdrop-blur-[2px]"
                            onClick={() => setSidebarOpen(false)}
                        ></div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>